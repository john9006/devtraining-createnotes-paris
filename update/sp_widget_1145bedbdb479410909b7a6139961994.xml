<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller=function($scope, spUtil) {
  var c = this;

  var newInputs = {
    sys_id: '894f5838db630010909b7a61399619fa' //inc INC0010002
  };

  c.useGet = function() {
    c.server.get(newInputs)  //sys_id of incident
    .then(function(resp) {
      c.data.get_example = resp.data.example_one.number;
      c.data.short_example = resp.data.example_one.description;
   });
  };
  
  c.useUpdate = function() {
    c.server.update();
  };
};]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description>https://community.servicenow.com/community?id=community_question&amp;sys_id=572c86eedbdf9f00e0e80b55ca961928</description>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>server-get-vs-update-demo</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>Server Get vs Update Demo</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
  /* populate the 'data' object */
  /* e.g., data.table = $sp.getValue('table'); */
  if(input){
    data.example_one = recordHandler(input.sys_id, null);
  }

  if(input.updateMe){
    data.updated = recordHandler(input.updateMe, null).number;
    data.showme = true;
  }

  if(input.updateMe && input.sdescription){
    data.short_example = recordHandler(input.updateMe, input.sdescription);
  }

  function recordHandler(sysid, short_description){
    var inc = new GlideRecord('incident');
    inc.get(sysid);

    if(!inc)
    return;

    if(short_description){
      inc.setValue('short_description', short_description);
      inc.update();
    }

    return {
      number: inc.getValue('number'),
      description: inc.getValue('short_description')
    }
  }

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>john.kelly</sys_created_by>
        <sys_created_on>2020-09-10 01:53:21</sys_created_on>
        <sys_id>1145bedbdb479410909b7a6139961994</sys_id>
        <sys_mod_count>451</sys_mod_count>
        <sys_name>Server Get vs Update Demo</sys_name>
        <sys_package display_value="CreateNotes" source="x_snc_createnotes">df5fd9a5090232007f44e1046c8ff69f</sys_package>
        <sys_policy/>
        <sys_scope display_value="CreateNotes">df5fd9a5090232007f44e1046c8ff69f</sys_scope>
        <sys_update_name>sp_widget_1145bedbdb479410909b7a6139961994</sys_update_name>
        <sys_updated_by>john.kelly</sys_updated_by>
        <sys_updated_on>2020-09-10 05:28:50</sys_updated_on>
        <template><![CDATA[<div class="panel panel-body">
<div>
   <h3 for="input one">Retrieve information using server.get()</h3> 
   <div>  
     <!--get_example value will be e.g. INC00100002 -->
    <h4 ng-if="!c.data.get_example"><em>Click "Use Get Method Button</em></h4>
    <h4 ng-if="c.data.get_example" class="text-primary">{{data.get_example}}</h4>
    <div>
      <!--will be the inc short_descreption -->
      {{data.short_example}}
    </div>
  </div>
</div>
<button class="btn btn-primary pull-right" ng-click="c.useGet()">
  Use Get Method
</button>
</div>

<div class="panel panel-body">
  <form class="form-group">
  <label for="updateMe">
    <h3>use server.update() to Update Data Object</h3>
  </label>
  <input class="form-control" ng-model="c.data.updateMe" id="updateMe" name="updateMe">
  <label for="sdescription">
    <h3>
      Update Short Description
    </h3>
  </label>
  <input class="form-control" ng-model="data.sdescription" id="sdescription">
  </form>
  <div>
    <h4 class="text-primary">
      {{data.updated}}
    </h4>
    <div ng-if="c.data.showme">
      {{data.short_example}}
    </div>
  </div>
  <button class="btn btn-primary pull-right" ng-click="c.useUpdate()">
    Use Update Method
  </button>
  </div>
]]></template>
    </sp_widget>
</record_update>
